"use strict";(self.webpackChunkdouban02=self.webpackChunkdouban02||[]).push([[276],{621:(e,l,i)=>{var t=i(272);!function(){let e=document.querySelectorAll(".star-point"),l=document.querySelectorAll(".star");for(let i=0;i<e.length;i++){let t=e[i].textContent;l[i].style.backgroundPosition="0% "+(100-10*Math.round(t))+"%"}}(),(0,t.G$)();let c=document.querySelectorAll(".clissify_choices");for(let e=0;e<c.length;e++)c[e].firstElementChild.classList.add("choice_hover");let n=document.querySelectorAll(".nocl");function s(){for(let e=0;e<c.length;e++)for(let l=0;l<c[e].children.length&&!(4==e&&l>=c[4].children.length-2);l++)c[e].children[l].addEventListener("click",(()=>{for(let l=0;l<c[e].children.length;l++)c[e].children[l].classList.remove("choice_hover"),c[e].children[l].classList.add("cchoice_hover");c[e].children[l].classList.remove("cchoice_hover"),c[e].children[l].classList.add("choice_hover");for(let e=0;e<n.length;e++)n[e].classList.remove("cchoice_hover"),n[e].classList.remove("choice_hover")}))}s();let d=document.querySelector(".sub_selfchoice");n[0].addEventListener("click",(()=>{n[0].style.display="none",d.style.display="inline-block"}));let r=document.querySelector("#sub_self"),o=document.querySelector("#self_text");r.addEventListener("click",(()=>{if(o.value){let e=document.createElement("div");e.classList.add("clissify_cchoice"),e.classList.add("cchoice_hover"),e.textContent=o.value,e.addEventListener("click",(()=>{s()})),c[4].insertBefore(e,n[0]),o.value="",n[0].style.display="inline-block",d.style.display="none",s()}}));let a=document.querySelectorAll(".top_choice");for(let e=0;e<a.length;e++)a[e].addEventListener("click",(()=>{for(let e=0;e<a.length;e++)a[e].classList.remove("top_choice_click");a[e].classList.add("top_choice_click")}));let h=document.querySelectorAll(".mk_choice");for(let e=0;e<h.length;e++){let l=0;h[e].addEventListener("click",(()=>{0==l?(h[e].children[0].style.display="none",h[e].children[1].style.display="block",l=1):(h[e].children[0].style.display="block",h[e].children[1].style.display="none",l=0)}))}let m=document.querySelectorAll(".img_coice-1");m[0].children[0].style.display="block",m[0].children[1].style.display="none",m[1].children[0].style.display="none",m[1].children[1].style.display="block";let u=document.querySelectorAll(".film_big_box");for(let e=0;e<m.length;e++)m[e].addEventListener("click",(()=>{for(let l=0;l<2;l++)0==e?(m[0].children[0].style.display="block",m[0].children[1].style.display="none",m[1].children[0].style.display="none",m[1].children[1].style.display="block",u[0].classList.remove("film_hidden"),u[1].classList.add("film_hidden")):(m[0].children[0].style.display="none",m[0].children[1].style.display="block",m[1].children[0].style.display="block",m[1].children[1].style.display="none",u[0].classList.add("film_hidden"),u[1].classList.remove("film_hidden"))}));let y=document.querySelector("#load_more");window.history.pushState(null,null,location.href.split("?")[0]+"?limit=20");let f=parseInt(window.location.search.substr(7)),v=document.querySelector("#film_big_box01"),p=document.querySelector("#film_big_box02"),_=document.querySelectorAll(".clissify_cchoice");async function L(){let e=(await(0,t.eO)("/film/filmlist")).data;for(let i=1;i<c.length-1;i++)for(let n=0;n<c[i].children.length;n++)c[i].children[n].addEventListener("click",(async()=>{let c;1==i&&0!=n&&(c=await(0,t.Gz)("/film/supersearch","type="+_[i].textContent)),2==i&&0!=n&&(c=await(0,t.Gz)("/film/supersearch","location="+_[i].textContent)),3==i&&0!=n&&(c=await(0,t.Gz)("/film/supersearch","release_time="+_[i].textContent)),4==i&&0!=n&&(c=await(0,t.Gz)("/film/supersearch","tag="+_[i].textContent)),0==n&&(c=await(0,t.eO)("/film/filmlist"));let s=c.data;e=s,v.innerHTML="",p.innerHTML="",l()}));for(let i=0;i<_.length;i++)_[i].addEventListener("click",(async()=>{let c=(await(0,t.Gz)("/film/supersearch","type="+_[i].textContent)).data;e=c,v.innerHTML="",p.innerHTML="",l()}));function l(){for(let l=f-20;l<f&&l<e.length;l++){let e=document.createElement("div");e.classList.add("filem_small_box"),e.innerHTML="<div class='img_box'><img src='' alt='' class='film_img'></div><div class='name_points'>null<div class='points'>1.0</div></div>",v.append(e);let l=document.createElement("div");l.classList.add("film_in"),l.innerHTML="<div class='film_pic'><img src='' alt='' class='fime_picture'></div><div class='pic_right'><div class='small_film_name'>null</div><div class='eva'><div class='starsAndscore'><span class='star'></span><span class='star-point'>8</span></div></div><div class='film_name_information'><div id='director'>导演:<div class='director_name'></div></div><div id='main_actor'>主演:<div class='main_actor_name'></div></div></div></div>",p.append(l)}let l=document.querySelectorAll(".filem_small_box"),i=document.querySelectorAll(".film_in");for(let c=f-20;c<f&&c<e.length;c++)l[c].children[0].children[0].src=e[c].poster_url,l[c].children[1].innerHTML=e[c].name+"<div class='points'>"+e[c].score+"</div>",l[c].children[0].children[0].addEventListener("click",(()=>{location.href=(0,t.pS)("/../subject/index.html?film_id="+e[c].id)})),l[c].children[1].addEventListener("click",(()=>{location.href=(0,t.pS)("/../subject/index.html?film_id="+e[c].id)})),i[c].children[0].children[0].src=e[c].poster_url,i[c].children[1].children[0].textContent=e[c].name,i[c].children[1].children[1].children[0].children[1].textContent=e[c].score,i[c].children[1].children[2].children[0].children[0].textContent=e[c].directer,i[c].children[1].children[2].children[1].children[0].textContent=e[c].screenwriter,i[c].children[0].children[0].addEventListener("click",(()=>{location.href=(0,t.pS)("/../subject/index.html?film_id="+e[c].id)})),i[c].children[1].children[0].addEventListener("click",(()=>{location.href=(0,t.pS)("/../subject/index.html?film_id="+e[c].id)}))}l()}L(),y.addEventListener("click",(()=>{f+=20,window.history.pushState(null,null,location.href.split("?")[0]+"?limit="+f),L()})),console.log(f)}},e=>{var l;l=621,e(e.s=l)}]);