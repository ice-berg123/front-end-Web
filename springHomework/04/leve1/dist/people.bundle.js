"use strict";(self.webpackChunkdouban02=self.webpackChunkdouban02||[]).push([[210],{91:(e,t,n)=>{var l=n(272);(0,l.G$)(),function(){let e=document.querySelectorAll(".star-point"),t=document.querySelectorAll(".star");for(let n=0;n<e.length;n++){let l=e[n].textContent;t[n].style.backgroundPosition="0% "+(100-10*Math.round(l))+"%"}}();let i=document.querySelector("#username_kinds_info"),c=document.querySelector("#tag_people"),r=["我的电影主页","我想看的电影","我看过的电影"],d=document.querySelector("#username");for(let e=0;e<c.children.length;e++)c.children[e].addEventListener("click",(()=>{for(let e=0;e<i.children.length;e++)i.children[e].style.display="none";i.children[e].style.display="block",d.textContent=r[e]}));let s=document.querySelector("#setintobox"),o=document.querySelector("#userintroduction");o.children[1].addEventListener("click",(e=>{o.children[0].style.display="none",s.children[0].style.display="inline-block",s.children[1].textContent="提交",e.stopPropagation()})),s.children[1].addEventListener("click",(e=>{""!=s.children[0].value&&((0,l.LM)("/user/updateintroduction","introduction="+s.children[0].value),setInterval((()=>{location.reload()}),500))})),window.addEventListener("click",(()=>{o.children[0].style.display="inline-block",s.children[0].style.display="none",s.children[0].value="",s.children[1].textContent="修改简介"}));let a=document.querySelectorAll(".my_comment_more_info");for(let e=0;e<a.length;e++)a[e].textContent.length>115&&(a[e].textContent=a[e].textContent.substr(0,114)+"...");!async function(){let e=await(0,l.mM)(),t=document.querySelector("#userimg");o.children[0].textContent=e.introduction,t.src=e.picture_url;let n=(await(0,l.Gr)("/shortpost/getshortpostsofuser")).data,i=document.querySelector("#want_films"),c=document.querySelector("#see_films"),r=document.querySelector("#username_want"),d=document.querySelector("#username_see"),s=document.querySelectorAll(".pos_numbers");for(let e=0;e<n.length;e++){let t=0,o=0;if(1==n[e].want){t++,s[0].textContent="共"+t+"部",console.log(n[e].film_id);let c=(await(0,l.Gz)("/film/getfilm","film_id="+(parseInt(n[e].film_id)+1))).data,d=document.createElement("IMG");d.addEventListener("click",(()=>{window.location.href=(0,l.pS)("/../subject/index.html?film_id="+parseInt(n[e].film_id))})),d.src=c.poster_url,d.classList.add("main_film_img"),i.append(d);let o=document.createElement("div");o.innerHTML="<img src='' class='comment_film_imgb' alt=''><div class='film_right_info'><div class='film_title_comment'><span>null</span></div><div class='film_more_information'><span>null</span></div><div class='my_comment'><div class='time'>null</div><div class='my_tag'>标签:<span>null</span></div></div><span class='my_comment_content'>null</span></div>",o.children[0].src=c.poster_url,o.children[1].children[0].children[0].textContent=c.name+" / "+c.other_name,o.children[1].children[1].children[0].textContent=c.release_time+" / "+c.directer+" / "+c.screenwriter+" / "+c.length+" / "+c.type+" / "+c.language,o.children[1].children[2].children[0].textContent=n[e].post_time.substr(0,10),o.children[1].children[2].children[1].children[0].textContent=n[e].tags,o.children[1].children[3].textContent=n[e].txt,o.classList.add("comment_box"),o.children[0].addEventListener("click",(()=>{window.location.href=(0,l.pS)("/../subject/index.html?film_id="+parseInt(n[e].film_id))})),o.children[1].children[0].children[0].addEventListener("click",(()=>{window.location.href=(0,l.pS)("/../subject/index.html?film_id="+parseInt(n[e].film_id))})),r.append(o)}else{o++,s[1].textContent="共"+o+"部";let t=(await(0,l.Gz)("/film/getfilm","film_id="+(parseInt(n[e].film_id)+1))).data,i=document.createElement("IMG");i.src=t.poster_url,i.classList.add("main_film_img"),c.append(i);let r=document.createElement("div");r.innerHTML="<img src='' class='comment_film_imgb' alt=''><div class='film_right_info'><div class='film_title_comment'><span>null</span></div><div class='film_more_information'><span>null</span></div><div class='my_comment'><div class='time'>null</div><div class='my_tag'>标签:<span>null</span></div></div><span class='my_comment_content'>null</span></div>",r.children[0].src=t.poster_url,r.children[1].children[0].children[0].textContent=t.name+" / "+t.other_name,r.children[1].children[1].children[0].textContent=t.release_time+" / "+t.directer+" / "+t.screenwriter+" / "+t.length+" / "+t.type+" / "+t.language,r.children[1].children[2].children[0].textContent=n[e].post_time.substr(0,10),r.children[1].children[2].children[1].children[0].textContent=n[e].tags,r.children[1].children[3].textContent=n[e].txt,r.classList.add("comment_box"),r.children[0].addEventListener("click",(()=>{window.location.href=(0,l.pS)("/../subject/index.html?film_id="+parseInt(n[e].film_id))})),r.children[1].children[0].children[0].addEventListener("click",(()=>{window.location.href=(0,l.pS)("/../subject/index.html?film_id="+parseInt(n[e].film_id))})),d.append(r)}}let a=(await(0,l.Gr)("/longpost/longpostsofuser")).data;s[2].textContent="共"+a.length+"条",console.log(a);let m=document.querySelector("#my_film_comment");for(let e=0;e<a.length;e++){let t=document.createElement("div");t.classList.add("film_comment_box"),t.innerHTML="<img src='' alt='' class='film_img'><div class='film_right_part_box'><div class='my_comment_title'>null</div><div class='my_co_info'><span>null</span><span>评论:</span><span>null</span></div><div class='my_comment_more_info'>null</div></div>",m.append(t);let n=(await(0,l.Gz)("/film/getfilm","film_id="+a[e].film_id)).data;t.children[0].src=n.poster_url,t.children[1].children[0].textContent=a[e].title,t.children[1].children[1].children[0].textContent=a[e].username,t.children[1].children[1].children[2].textContent=n.name,t.children[1].children[2].textContent=a[e].txt}let h=(await(0,l.eO)("/post/lookpost")).data;console.log(h)}()}},e=>{var t;t=91,e(e.s=t)}]);