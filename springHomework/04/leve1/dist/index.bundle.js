"use strict";(self.webpackChunkdouban02=self.webpackChunkdouban02||[]).push([[826],{809:(e,t,l)=>{var n=l(272);function r(){let e=document.querySelectorAll(".star-point"),t=document.querySelectorAll(".star");for(let l=0;l<e.length;l++){let n=e[l].textContent;t[l].style.backgroundPosition="0% "+(100-10*Math.round(n))+"%"}}r(),(0,n.G$)();let i=document.querySelector("#arrowhead_2_01"),c=document.querySelector("#arrowhead_2_02"),o=document.querySelectorAll(".rec_box"),d=document.querySelector("#recommend"),h=Date.now()-1600;i.addEventListener("click",(()=>{clearInterval(s),Date.now()-h>=1600&&(f("left"),h=Date.now()),s=setInterval((()=>{f("right")}),1e4)})),c.addEventListener("click",(()=>{clearInterval(s),Date.now()-h>=1600&&(f("right"),h=Date.now()),s=setInterval((()=>{f("right")}),5e3)}));for(let e=0;e<o.length;e++)o[e].style.left=45*e+"rem";setTimeout((()=>{for(let e=0;e<o.length;e++)o[e].classList.add("rec_box_remove")}),100);let s=setInterval((()=>{f("right")}),5e3),a=1,m=document.querySelector("#pro02_left");function f(e){if("left"===e){for(let e=0;e<o.length;e++)o[e].style.left=u(parseInt(o[e].style.left))+45+"rem";let e=d.removeChild(d.lastElementChild);e.style.left="0rem",d.insertBefore(e,d.firstElementChild),a--}if("right"===e){for(let e=0;e<o.length;e++)o[e].style.left=u(parseInt(o[e].style.left))-45+"rem";let e=d.removeChild(d.firstElementChild);e.style.left=45*(o.length-1)+"rem",d.appendChild(e),a++}a<=0?a=7:a>7&&(a=1),m.textContent=a}function u(e){return isNaN(e)?0:e}let g=document.querySelectorAll(".hot_mid_film"),y=document.querySelectorAll(".hotingFilm");for(let e=0;e<g.length;e++){g[e].style.left=45*e+"rem";for(let t=0;t<g[e].children.length;t++)g[e].children[t].style.left=9.3*t+"rem"}let p=document.querySelector(".hover_film_hot"),b=document.querySelectorAll(".hotingImg");for(let e=0;e<b.length;e++)b[e].addEventListener("mouseover",(()=>{!async function(){let t=(await(0,n.eO)("/film/filmlist")).data;p.children[0].children[0].textContent=t[e].name,p.children[1].children[0].children[0].children[1].textContent=t[e].score,p.children[1].children[1].textContent="("+t[e].post_num+"人评价)",p.children[2].children[0].textContent=t[e].length,p.children[2].children[1].textContent=t[e].location,p.children[3].children[0].children[0].textContent=t[e].directer,p.children[3].children[1].children[0].textContent=t[e].screenwriter,r()}(),p.style.left=parseInt(y[e].style.left)+8.5+"rem",p.style.display="block"})),b[e].addEventListener("mouseout",(()=>{p.style.display="none"}));let v=document.querySelectorAll(".filmBigbox");function C(){for(let e=0;e<v.length;e++){let t=0;for(let l=0;l<v[e].children[1].children.length;l++){v[e].children[1].children[l].style.left=45*l+"rem";let n=0;for(let r=0;r<v[e].children[1].children[l].children.length;r++)v[e].children[1].children[l].children[r].style.left=9.3*n+"rem",v[e].children[1].children[l].children[r].style.top=15*t+"rem",n++,5==n&&(n=0,t++);t=0}}}let S,k=document.querySelectorAll(".hover_big_box"),_=document.querySelectorAll(".hover_toptag");!async function(){let e=(await(0,n.eO)("/film/filmlist")).data;for(let t=0;t<B.length;t++){let l=0,n=e.length;for(l=Math.ceil(e.length/10);l>0;l--){let e=document.createElement("div");e.classList.add("filmMidbox");for(let t=0;t<10&&n>0;t++){let t=document.createElement("div");t.classList.add("filmsSmallbox"),t.innerHTML="<img src='' alt='' class='filmimgbiu'><div class='filmname filmnamebiu warp'>2<span class='filmpointsbiu'>null</span></div>",e.append(t),n--}B[t].append(e)}B[t].insertBefore(B[t].lastElementChild,B[t].firstElementChild),C()}let t=document.querySelectorAll(".hover_bigbig");for(let l=0;l<B.length;l++){let n=0;for(let i=0;i<B[l].children.length;i++)for(let c=0;c<B[l].children[i].children.length;c++)B[l].children[i].children[c].p=n,B[l].children[i].children[c].addEventListener("mouseover",(()=>{k[l].children[0].children[0].innerHTML=e[B[l].children[i].children[c].p].name+"<span class='filmyears hover_topfilmyears'>("+e[B[l].children[i].children[c].p].release_time.substr(0,4)+")</span>",k[l].children[0].children[1].children[0].children[1].textContent=e[B[l].children[i].children[c].p].score;let n=(e[B[l].children[i].children[c].p].length+" / "+e[B[l].children[i].children[c].p].location+" / "+e[B[l].children[i].children[c].p].type+" / "+e[B[l].children[i].children[c].p].directer+"(导演) / "+e[B[l].children[i].children[c].p].screenwriter).split(" / ");for(let e=0;e<n.length;e++){let t=document.createElement("div");t.textContent=n[e],_[l].append(t)}S=_[l].innerHTML,t[l].style.display="block",t[l].style.left=parseInt(B[l].children[i].children[c].style.left)+7.7+"rem",0==l&&(t[l].style.top=parseInt(B[l].children[i].children[c].style.top)+24.6+"rem"),1==l&&(t[l].style.top=parseInt(B[l].children[i].children[c].style.top)+60.6+"rem"),r()})),B[l].children[i].children[c].addEventListener("mouseout",(()=>{t[l].style.display="none",_[l].textContent=""})),n++}for(let e=0;e<t.length;e++)t[e].addEventListener("mouseover",(()=>{t[e].style.display="block",_[e].innerHTML=S})),t[e].addEventListener("mouseout",(()=>{t[e].style.display="none",_[e].textContent=""}));r()}();let x=document.querySelector("#pro01");y.length%5==0?x.children[1].textContent=y.length/5:x.children[1].textContent=y.length/5+1;let E=document.querySelector("#arrowhead_1_01"),w=document.querySelector("#arrowhead_1_02"),q=1;function L(e,t,l,n,r=0){if("left"===e){for(let e=0;e<t.length;e++)t[e].style.left=u(parseInt(t[e].style.left))+45+"rem";let e=l.removeChild(l.lastElementChild);e.style.left="0rem",l.insertBefore(e,l.firstElementChild),n--}if("right"===e){for(let e=0;e<t.length;e++)t[e].style.left=u(parseInt(t[e].style.left))-45+"rem";let e=l.removeChild(l.firstElementChild);e.style.left=45*(t.length-1+r)+"rem",l.appendChild(e),n++}return n<=0?n=t.length:n>t.length&&(n=1),n}let I=document.querySelector("#left_01_imgboxs"),D=setInterval((()=>{q=L("right",g,I,q),x.children[0].textContent=q}),5e3);E.addEventListener("click",(()=>{clearInterval(D),Date.now()-h>=500&&(q=L("left",g,I,q),x.children[0].textContent=q,h=Date.now()),D=setInterval((()=>{q=L("right",g,I,q),x.children[0].textContent=q}),5e3)})),w.addEventListener("click",(()=>{clearInterval(D),Date.now()-h>=500&&(q=L("right",g,I,q),x.children[0].textContent=q,h=Date.now()),D=setInterval((()=>{q=L("right",g,I,q),x.children[0].textContent=q}),5e3)}));let A=0,T=document.querySelectorAll(".arrowheads"),M=1,j=1,H=1,B=document.querySelectorAll(".filmbbbbox"),O=document.querySelector("#ar01"),N=document.querySelector("#ar02"),F=document.querySelector("#ar03"),G=document.querySelector("#ar04"),P=1,$=0;function z(e){return 0==e?3:4==e?1:e}let J=["很差","较差","还行","推荐","力荐"],K=document.querySelector("#commentboxborder");document.querySelector("#commentbox_close").addEventListener("click",(()=>{K.style.display="none"}));let Q=document.querySelectorAll(".writecomment");for(let e=0;e<Q.length;e++)Q[e].addEventListener("click",(()=>{K.style.display="block"}));let R=document.querySelectorAll(".c_stars1"),U=document.querySelector("#eva1_score");for(let e=0;e<R.length;e++)R[e].addEventListener("mouseover",(()=>{for(let t=0;R.length;t++)t<=e&&(R[t].src="./pictures/subject/staryellow.png"),t>e&&(R[t].src="./pictures/subject/star.png"),U.textContent=J[e]}));for(let e=0;e<T.length;e++){let t=0,l=0;T[e].children[1].style.backgroundColor="rgb(97,152,215)";for(let n=1;n<T[e].children.length-1;n++)T[e].children[n].addEventListener("click",(()=>{for(let t=1;t<T[e].children.length-1;t++)T[e].children[t].style.backgroundColor="rgb(216,216,216)";if(T[e].children[n].style.backgroundColor="rgb(97,152,215)",0==e?(t=n-M,M=n):(l=n-j,j=n),t>0){for(let e=0;e<t;e++)setTimeout((()=>{H=L("right",B[0].children,B[0],H,1)}),500*e);t=0}if(t<0){for(let e=0;e<-1*t;e++)setTimeout((()=>{H=L("left",B[0].children,B[0],H,1)}),500*e);t=0}if(l>0){for(let e=0;e<l;e++)setTimeout((()=>{P=L("right",B[1].children,B[1],P,1)}),500*e);l=0}if(l<0){for(let e=0;e<-1*l;e++)setTimeout((()=>{P=L("left",B[1].children,B[1],P,1)}),500*e);l=0}}))}O.addEventListener("click",(()=>{if(Date.now()-A>=500){for(let e=1;e<T[0].children.length-1;e++)T[0].children[e].style.backgroundColor="rgb(216,216,216)";M=z(--M),T[0].children[M].style.backgroundColor="rgb(97,152,215)",H=L("left",B[0].children,B[0],H,1),A=Date.now()}})),N.addEventListener("click",(()=>{if(Date.now()-A>=500){for(let e=1;e<T[0].children.length-1;e++)T[0].children[e].style.backgroundColor="rgb(216,216,216)";M=z(++M),T[0].children[M].style.backgroundColor="rgb(97,152,215)",H=L("right",B[0].children,B[0],H,1),A=Date.now()}})),F.addEventListener("click",(()=>{if(Date.now()-$>=500){for(let e=1;e<T[1].children.length-1;e++)T[1].children[e].style.backgroundColor="rgb(216,216,216)";j=z(--j),T[1].children[j].style.backgroundColor="rgb(97,152,215)",P=L("left",B[1].children,B[1],P,1),$=Date.now()}})),G.addEventListener("click",(()=>{if(Date.now()-$>=500){for(let e=1;e<T[1].children.length-1;e++)T[1].children[e].style.backgroundColor="rgb(216,216,216)";j=z(++j),T[1].children[j].style.backgroundColor="rgb(97,152,215)",P=L("right",B[1].children,B[1],P,1),$=Date.now()}})),setInterval((()=>{for(let e=0;e<b.length;e++)b[e].addEventListener("click",(()=>{location.href=(0,n.pS)("/subject.html?film_id="+e)}))}),200);for(let e=0;e<Q.length;e++)Q[e].addEventListener("click",(()=>{null==localStorage.getItem("token")&&(location.href=(0,n.pS)("/login.html"))}));!async function(){let e=(await(0,n.eO)("/film/filmlist")).data;for(let t=0;t<y.length;t++)y[t].children[0].src=e[t].poster_url,y[t].children[1].textContent=e[t].name,y[t].children[1].addEventListener("click",(()=>{location.href=(0,n.pS)("/subject.html?film_id="+t)})),y[t].children[2].children[0].children[1].textContent=e[t].score;for(let t=0;t<B.length;t++){let l=0;for(let r=0;r<B[t].children.length;r++)for(let i=0;i<B[t].children[r].children.length;i++)B[t].children[r].children[i].children[0].src=e[l].poster_url,B[t].children[r].children[i].p=l,B[t].children[r].children[i].children[1].innerHTML=e[l].name+"<span class='filmpointsbiu'>"+e[i].score+"</span>",B[t].children[r].children[i].addEventListener("click",(()=>{location.href=(0,n.pS)("/subject.html?film_id="+B[t].children[r].children[i].p)})),l++}let t=document.querySelectorAll(".rb2_02");for(let l=0;l<t.length;l++)t[l].children[0].textContent=e[l].name,t[l].children[0].href=(0,n.pS)("/subject.html?film_id="+l);r()}()}},e=>{var t;t=809,e(e.s=t)}]);