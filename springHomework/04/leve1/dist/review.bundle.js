"use strict";(self.webpackChunkdouban02=self.webpackChunkdouban02||[]).push([[915],{443:(e,t,n)=>{var o=n(272);(0,o.G$)(),function(){let e=document.querySelectorAll(".star-point"),t=document.querySelectorAll(".star");for(let n=0;n<e.length;n++){let o=e[n].textContent;t[n].style.backgroundPosition="0% "+(100-10*Math.round(o))+"%"}}();let l=document.querySelectorAll(".box05"),s=document.querySelectorAll(".useornoIMG");for(let e=0;e<l.length;e++)l[e].addEventListener("mouseover",(()=>{s[e].style.top="-1.2rem"})),l[e].addEventListener("mouseout",(()=>{s[e].style.top="0.45rem"}));let r=window.location.search.substr(1);!async function(){let e=(await(0,o.Gz)("/longpost/getlongpostbyfilmid",r)).data,t=e.length-1;console.log(e);let n=document.querySelector("#userimg"),l=(await(0,o.Gr)("/user/getuserinfo")).data;n.src=l.picture_url,document.querySelector("#bottom_userimg").src=l.picture_url,console.log(l),document.querySelector("#username").textContent=l.username,document.querySelector("#comment_title").textContent=e[t].title,document.querySelector("#comment_info").textContent=e[t].txt,document.querySelector("#time").textContent=e[t].post_time.substr(0,19);let s=(await(0,o.Gz)("/film/getfilm",r)).data,i=document.querySelector("#filmname");i.addEventListener("click",(()=>{window.location.href=(0,o.pS)("/../subject/index.html?film_id="+(parseInt(r.substr(8))-1))})),i.textContent=s.name,document.querySelector("#useinfo").children[0].textContent=e[t].likes;let c=document.querySelector("#nouseinfo");c.children[0].textContent=e[t].dislikes,usefull.addEventListener("click",(async()=>{(0,o.LM)("/longpost/likelongpost",e[t].post_id),location.reload()})),c.addEventListener("click",(async()=>{await(0,o.LM)("/longpost/dislikelongpost",e[t].post_id);location.reload()}));let d=document.querySelector("#inputre");document.querySelector("#submit").addEventListener("click",(async()=>{if(""!=d.value){(await(0,o.LM)("/lpcomment/addlpcomment","post_id="+e[t].post_id+"&&txt="+d.value)).data;window.location.reload()}}));let u=(await(0,o.Gz)("/lpcomment/getlpcomment","post_id="+e[t].post_id)).data;console.log(u);let a=document.querySelector("#response_box");if(u)for(let e=0;e<u.length;e++){let t=document.createElement("div");t.innerHTML="<img src='' classers='u_responseimg' class='img' alt=''><div class='user_response_right'><div class='user_iiiii'><div class='user_response_name'>null</div><div class='user_response_time'>null</div></div><div class='user_response_info'>null</div></div>",t.classList.add("user_response"),t.children[1].children[0].children[0].textContent=u[e].username,t.children[1].children[0].children[1].textContent=u[e].comment_time.substr(0,19),t.children[1].children[1].textContent=u[e].txt,a.append(t)}}()}},e=>{var t;t=443,e(e.s=t)}]);