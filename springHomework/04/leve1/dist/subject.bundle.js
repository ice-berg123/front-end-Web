"use strict";(self.webpackChunkdouban02=self.webpackChunkdouban02||[]).push([[713],{175:(e,t,n)=>{var r=n(272);function l(){let e=document.querySelectorAll(".star-point"),t=document.querySelectorAll(".star");for(let n=0;n<e.length;n++){let r=e[n].textContent;t[n].style.backgroundPosition="0% "+(100-10*Math.round(r))+"%"}}(0,r.G$)(),l();let o=document.querySelectorAll(".c_stars"),c=document.querySelector("#eva_score"),s=["很差","较差","还行","推荐","力荐"];for(let e=0;e<o.length;e++)o[e].addEventListener("mouseover",(()=>{for(let t=0;o.length;t++)t<=e&&(o[t].src="./pictures/subject/staryellow.png"),t>e&&(o[t].src="./pictures/subject/star.png"),c.textContent=s[e]}));document.querySelector("#eva_star").addEventListener("mouseout",(function(){for(let e=0;e<o.length;e++)o[e].src="./pictures/subject/star.png";c.textContent=""}));let d=document.querySelectorAll(".c_stars1"),i=document.querySelector("#eva1_score");for(let e=0;e<d.length;e++)d[e].addEventListener("mouseover",(()=>{for(let t=0;d.length;t++)t<=e&&(d[t].src="./pictures/subject/staryellow.png"),t>e&&(d[t].src="./pictures/subject/star.png"),i.textContent=s[e]}));let a=document.querySelector("#share_to"),u=document.querySelector("#share_box");a.addEventListener("mousedown",(()=>{a.style.backgroundColor="rgb(255,153,51)"})),a.addEventListener("mouseup",(()=>{a.style.backgroundColor=""}));let m=document.querySelector("#upordown"),h=document.querySelector("#share_com");h.style.display="none";{let e=0;a.addEventListener("click",(t=>{0==e?(u.classList.add("share_box_border"),m.textContent="▲",h.style.display="block",t.stopPropagation(),e=1):(u.classList.remove("share_box_border"),h.style.display="none",m.textContent="▼",e=0)}))}document.onclick=function(){u.classList.remove("share_box_border"),h.style.display="none",m.textContent="▼"};let p=new Array(5).fill(0);for(let e=0;e<100;e++){p[parseInt(10*Math.random())%5]++}let y=document.querySelectorAll(".rect_numscore");for(let e=0;e<5;e++)y[e].innerHTML=p[e]+.1*parseInt(10*Math.random())+"%";let _=document.querySelectorAll(".rect_score");for(let e=0;e<5;e++)_[e].style.width=p[e]/100*6+"rem";document.querySelector("#kinds_than").innerHTML=parseInt(100*Math.random())+"%<span id='kinds'>null</span>";let f=document.querySelector("#commentboxborder");document.querySelector("#commentbox_close").addEventListener("click",(()=>{f.style.display="none"}));let x=document.querySelectorAll(".writecomment");for(let e=0;e<x.length;e++)x[e].addEventListener("click",(()=>{f.style.display="block"}));let g=parseInt(window.location.search.substr(9))+1,v=document.querySelector("#adddis");v.addEventListener("click",(()=>{location.href=(0,r.pS)("/../discuss/index.js?film_id="+g)})),async function(){let e=(await(0,r.Gz)("/film/getfilm","film_id="+g)).data,t=document.querySelector("#film_title");document.querySelector("#film_pictures").children[0].src=e.poster_url,t.innerHTML=e.name+"<span>"+e.release_time.substr(0,4)+"</span>";let n=document.querySelector("#film_mm");n.children[0].children[1].textContent=e.directer,n.children[1].children[1].textContent=e.screenwriter,n.children[3].children[1].textContent=e.type,n.children[4].children[1].textContent=e.location,n.children[5].children[1].textContent=e.language,n.children[6].children[1].textContent=e.release_time,n.children[7].children[1].textContent=e.length,n.children[8].children[1].textContent=e.other_name,n.children[9].children[1].textContent=e.imdb;let o=document.querySelector("#score_all");o.children[1].children[1].textContent=e.score,document.querySelector("#score_big").textContent=e.score,o.children[1].children[1].style.display="none",document.querySelector("#eva_numbers").textContent=e.post_num+"人评价",l();let c=document.querySelectorAll(".file_name");for(let t=0;t<c.length;t++)c[t].textContent=e.name;document.querySelector("#plot_information").textContent=e.introduction;let s=(await(0,r.Gz)("/actor/getactorsbyfilmid","film_id="+g)).data,d=document.querySelector("#film_actors"),i=document.querySelector("#actornumbers");i.textContent="全部"+s.length+"人";for(let e=0;e<s.length;e++){let t=document.createElement("div"),n=document.createElement("img"),l=document.createElement("div"),o=document.createElement("div");n.src=s[e].picture_url,o.textContent=s[e].role;let c=(await(0,r.Gz)("/actor/searchactor","actor_id="+s[e].actor_id)).data;l.textContent=c.name,t.classList.add("actor_box"),n.classList.add("actor_img"),l.classList.add("actor_name"),o.classList.add("actor_pos"),t.append(n),t.append(l),t.append(o),d.append(t),n.i=e,n.addEventListener("click",(()=>{location.href=(0,r.pS)("/../actor/index.html?actor_id="+s[n.i].actor_id)}))}let a=(await(0,r.Gz)("/longpost/getlongpostbyfilmid","film_id="+g)).data,u=document.querySelector(".discusstion");for(let e=0;e<a.length;e++){let e=document.createElement("div");e.classList.add("dis_r1"),e.innerHTML="<div class='dis_title'>null</div><div class='dis_user'>来自<span>null</span></div><div class='dis_time'>null</div>",u.append(e)}for(let e=0;e<a.length;e++){let t=document.querySelectorAll(".dis_r1");t[e].children[0].textContent=a[e].title,t[e].children[1].children[0].textContent=a[e].username,t[e].children[2].textContent=a[e].post_time.substr(0,19)}document.querySelector(".sdadf").children[1].textContent="全部"+a.length+"条";let m=(await(0,r.Gz)("/shortpost/getshortpostbyfilmid","film_id="+(g-1))).data,h=document.querySelector("#comment");i.textContent="全部"+m.length+"条";for(let e=0;e<m.length;e++){let e=document.createElement("div");e.classList.add("comment_information"),e.innerHTML="<div class='ci_r1'><div class='username'>null</div>看过<div class='starsAndscore'><span class='star'></span><span class='star-point hinte'>8</span></div><div class='comment_time'>null</div></div><span class='comment_in'>null</span>",h.append(e)}let p=document.querySelectorAll(".comment_information");for(let e=0;e<p.length;e++)p[e].children[0].children[0].textContent=m[e].username,p[e].children[0].children[2].textContent=m[e].post_time.substr(0,10),p[e].children[1].textContent=m[e].txt;l()}();for(let e=0;e<x.length;e++)x[e].addEventListener("click",(()=>{null==localStorage.getItem("token")&&(location.href=(0,r.pS)("/../index/index.html"))}));v.addEventListener("click",(()=>{null==localStorage.getItem("token")&&(location.href=(0,r.pS)("/../index/index.html"))})),(0,r.WH)()}},e=>{var t;t=175,e(e.s=t)}]);